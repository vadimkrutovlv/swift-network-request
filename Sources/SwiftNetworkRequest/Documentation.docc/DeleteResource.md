#  Deleting an existing resource

## Overview

The **@Delete** macro generates Swift code for making HTTP DELETE requests to a specified endpoint. Unlike the **@Post** or **@Put** macros, it does not generate any request body structures since **DELETE** requests typically don't include a request body. The macro handles URL construction with path parameters and provides a convenient async function for executing the request.

## Usage

Use the **@Delete** macro to delete an existing resource.

### Basic Usage
Consider this data model, which can fetch and then delete a resource.


```swift
@GetColletion(url: "https://api.example.com/posts")
@Delete(url: "https://api.example.com/posts/:id")
struct Post {
    let id: Int
    var title: String
    var body: String
}
```

In order to delete an existing post, you can first fetch a collection of posts using the static method generated by the **@GetCollection** macro, filter for the post you want to delete, and then execute the instance function generated by the macro.

```swift 
var posts = Post.get()
var postToDelete = posts.first!    

try await postToDelete.delete()
```

Alternatively, you can use the @Get macro to fetch a single resource and then delete it.

```swift
@Get(url: "https://api.example.com/posts/:id")
@Delete(url: "https://api.example.com/posts/:id")
struct Post {
    let id: Int
    var title: String
    var body: String
}

let existingPost = Post.get(id: "123")
try await existingPost.delete()
```

### With Dynamic Headers

```swift
let customHeaders = [
    KeyValuePair(key: "X-Custom-Header", value: "CustomValue"),
    KeyValuePair(key: "Content-Type", value: "application/json")
]

try await postToDelete.delete(dynamicHeaders: customHeaders)
```

### With Dynamic Query Parameters

```swift
let queryParams = [
    KeyValuePair(key: "version", value: "1.0"),
    KeyValuePair(key: "format", value: "json")
]

try await postToDelete.delete(dynamicQueryParams: queryParams)
```

### With Both Dynamic Headers and Query Parameters

```swift
try await postToDelete.delete(
    dynamicHeaders: customHeaders,
    dynamicQueryParams: queryParams
)
```

Additionally, you can define default headers for every request by overriding the **request configuration** or **default authorization** properties. To learn more, refer to the <doc:RequestConfig> and <doc:Authorization> documentation.

## Path Parameters

The macro supports path parameters denoted by a colon prefix in the URL. In the examples shown above:

- `:id` -  is a path parameter that will be replaced with the actual **id** property value from the model when constructing the final URL.
- The final URL becomes: `https://jsonplaceholder.typicode.com/posts/{actualPostId}`

Path parameters are automatically extracted from the URL and used to build the complete endpoint URL at runtime.

**Important**: Path parameters must match property names defined in your model. If a path parameter doesn't correspond to an existing property, a compilation error will be thrown.


## Error Handling

The function is marked with `throws`, so wrap calls in a `do-catch` block for error handling:

```swift
do {
    try await postRequest.post()
    print("Post created successfully")
} catch {
    print("Failed to create post: \(error)")
}
```
